"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[783],{8918:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(6540),c=r(2151),u=r(7528);const l=(0,n.createContext)(null),a=e=>{let{initialState:t,children:r}=e;const{0:c,1:u}=(0,n.useState)(t);return n.createElement(l.Provider,{value:{state:c,setState:u}},r)},s=()=>{const e=(0,n.useContext)(l);if(!e)throw new Error("Outside ClassicProvider");return e};var o=r(4477),i=r(5124),d=r(431);function m(){const{state:e,setState:t}=s(),r=(0,n.useRef)(0);(0,n.useEffect)(()=>{r.current+=1});return n.createElement(o.A,{p:2,border:"1px solid grey"},n.createElement(i.A,null,"Classic CounterControls (renders: ",r.current,")"),["a","b","c"].map(r=>n.createElement(d.A,{key:r,onClick:()=>{return e=r,void t(t=>({...t,counters:{...t.counters,[e]:t.counters[e]+1}}));var e},variant:"contained",sx:{m:1}},"Increment ",r,": ",e.counters[r])))}function f(){const{state:e,setState:t}=s(),r=(0,n.useRef)(0);(0,n.useEffect)(()=>{r.current+=1});return n.createElement(o.A,{p:2,border:"1px solid grey",mt:2},n.createElement(i.A,null,"Classic Total: ",e.total," (renders: ",r.current,")"),n.createElement(d.A,{onClick:()=>{const r=Object.values(e.counters).reduce((e,t)=>e+t,0);t(e=>({...e,total:r}))},variant:"outlined",sx:{mt:1}},"Recalculate Total"))}const{Provider:E,useSelector:v,useSet:b}=function(e){const t=(0,n.createContext)(null);return{Provider:r=>{let{children:c}=r;const u=(0,n.useRef)(e),l=(0,n.useRef)(new Set),a={get:()=>u.current,set:e=>{const t=u.current,r="function"==typeof e?e(t):e,n={...t,...r};n!==t&&(u.current=n,l.current.forEach(e=>e()))},subscribe:e=>(l.current.add(e),()=>l.current.delete(e))};return n.createElement(t.Provider,{value:a},c)},useSelector:function(e){const r=(0,n.useContext)(t);if(!r)throw new Error("useSelector must be used within Provider");return(0,n.useSyncExternalStore)(r.subscribe,()=>e(r.get()),()=>e(r.get()))},useSet:function(){const e=(0,n.useContext)(t);if(!e)throw new Error("useSet must be used within Provider");return e.set}}}({counters:{a:0,b:1,c:2},total:3});function p(){const e=v(e=>e.counters),t=b(),r=(0,n.useRef)(0);(0,n.useEffect)(()=>{r.current+=1});return n.createElement(o.A,{p:2,border:"1px solid green"},n.createElement(i.A,null,"Fast CounterControls (renders: ",r.current,")"),["a","b","c"].map(r=>n.createElement(d.A,{key:r,onClick:()=>{return e=r,void t(t=>({counters:{...t.counters,[e]:t.counters[e]+1}}));var e},variant:"contained",sx:{m:1}},"Increment ",r,": ",e[r])))}function C(){const e=v(e=>e.total),t=v(e=>e.counters),r=b(),c=(0,n.useRef)(0);(0,n.useEffect)(()=>{c.current+=1});return n.createElement(o.A,{p:2,border:"1px solid green",mt:2},n.createElement(i.A,null,"Fast Total: ",e," (renders: ",c.current,")"),n.createElement(d.A,{onClick:()=>{const e=Object.values(t).reduce((e,t)=>e+t,0);r({total:e})},variant:"outlined",sx:{mt:1}},"Recalculate Total"))}var x=()=>n.createElement(c.A,null,n.createElement(u.A,{title:"Context Demo"}),n.createElement("div",{style:{display:"flex",gap:40,padding:20,paddingTop:100}},n.createElement("div",null,n.createElement(a,{initialState:{counters:{a:0,b:1,c:2},total:3}},n.createElement(m,null),n.createElement(f,null))),n.createElement("div",null,n.createElement(E,{initialState:{counters:{a:0,b:1,c:2},total:3}},n.createElement(p,null),n.createElement(C,null)))))}}]);
//# sourceMappingURL=component---src-pages-context-index-js-2617c7c85f366f10d9aa.js.map