"use strict";(self.webpackChunkgatsby_starter_default=self.webpackChunkgatsby_starter_default||[]).push([[783],{4303:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=r(6540),c=r(2151),l=r(7528);const a=(0,n.createContext)(null),u=e=>{let{initialState:t,children:r}=e;const{0:c,1:l}=(0,n.useState)(t);return n.createElement(a.Provider,{value:{state:c,setState:l}},r)},o=()=>{const e=(0,n.useContext)(a);if(!e)throw new Error("Outside ClassicProvider");return e};var s=r(4477),i=r(5124),d=r(431);function m(){const{state:e,setState:t}=o(),r=(0,n.useRef)(0);(0,n.useEffect)(()=>{r.current+=1});return n.createElement(s.A,{p:2,border:"1px solid grey"},n.createElement(i.A,null,"Classic CounterControls (renders: ",r.current,")"),["a","b","c"].map(r=>n.createElement(d.A,{key:r,onClick:()=>{return e=r,void t(t=>({...t,counters:{...t.counters,[e]:t.counters[e]+1}}));var e},variant:"contained",sx:{m:1}},"Increment ",r,": ",e.counters[r])))}function f(){const{state:e,setState:t}=o(),r=(0,n.useRef)(0);(0,n.useEffect)(()=>{r.current+=1});return n.createElement(s.A,{p:2,border:"1px solid grey",mt:2},n.createElement(i.A,null,"Classic Total: ",e.total," (renders: ",r.current,")"),n.createElement(d.A,{onClick:()=>{const r=Object.values(e.counters).reduce((e,t)=>e+t,0);t(e=>({...e,total:r}))},variant:"outlined",sx:{mt:1}},"Recalculate Total"))}const{Provider:E,useStore:v}=function(e){function t(){const t=(0,n.useRef)(e),r=(0,n.useCallback)(()=>t.current,[]),c=(0,n.useRef)(new Set);return{get:r,set:(0,n.useCallback)(e=>{t.current={...t.current,...e},c.current.forEach(e=>e())},[]),subscribe:(0,n.useCallback)(e=>(c.current.add(e),()=>c.current.delete(e)),[])}}const r=(0,n.createContext)(null);return{Provider:function(e){let{children:c}=e;return n.createElement(r.Provider,{value:t()},c)},useStore:function(t){const c=(0,n.useContext)(r);if(!c)throw new Error("Store not found");return[(0,n.useSyncExternalStore)(c.subscribe,()=>t(c.get()),()=>t(e)),c.set]}}}({counters:{a:0,b:1,c:2},total:3});function b(){const[e,t]=v(e=>e.counters),r=(0,n.useRef)(0);(0,n.useEffect)(()=>{r.current+=1});return n.createElement(s.A,{p:2,border:"1px solid green"},n.createElement(i.A,null,"Fast CounterControls (renders: ",r.current,")"),["a","b","c"].map(r=>n.createElement(d.A,{key:r,onClick:()=>{return n=r,void t({counters:{...e,[n]:e[n]+1}});var n},variant:"contained",sx:{m:1}},"Increment ",r,": ",e[r])))}function C(){const[e,t]=v(e=>e.total),[r]=v(e=>e.counters),c=(0,n.useRef)(0);(0,n.useEffect)(()=>{c.current+=1});return n.createElement(s.A,{p:2,border:"1px solid green",mt:2},n.createElement(i.A,null,"Fast Total: ",e," (renders: ",c.current,")"),n.createElement(d.A,{onClick:()=>{const e=Object.values(r).reduce((e,t)=>e+t,0);t({total:e})},variant:"outlined",sx:{mt:1}},"Recalculate Total"))}var p=()=>n.createElement(c.A,null,n.createElement(l.A,{title:"Context Demo"}),n.createElement("div",{style:{display:"flex",gap:40,padding:20,paddingTop:100}},n.createElement("div",null,n.createElement(u,{initialState:{counters:{a:0,b:1,c:2},total:3}},n.createElement(m,null),n.createElement(f,null))),n.createElement("div",null,n.createElement(E,null,n.createElement(b,null),n.createElement(C,null)))))}}]);
//# sourceMappingURL=component---src-pages-context-index-js-d4febfb7b40ec354cc6e.js.map